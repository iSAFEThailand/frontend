(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{114:function(e,t,r){"use strict";var n,o,c,m,l,f,d,h,v,y,_,w,k,S=r(4),x=(r(43),r(144),r(57),r(9)),R=r(64),O=r.n(R),P=r(36);t.a={checkUser:(k=Object(S.a)(regeneratorRuntime.mark((function e(t){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("username",t),data=x.a.post("/OTACheckUser",r).then((function(e){return e})).catch((function(e){return e})),e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)}),checkDevie:function(e){navigator.userAgent.substring(0,navigator.userAgent.lastIndexOf(")")+1)},checkDeviceLogin:(w=Object(S.a)(regeneratorRuntime.mark((function e(t){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("mem_device",t),e.next=4,x.a.post("/checkLoginDevice",r).then((function(e){return e})).catch((function(e){return e}));case 4:return data=e.sent,e.abrupt("return",data);case 6:case"end":return e.stop()}}),e)}))),function(e){return w.apply(this,arguments)}),forget:(_=Object(S.a)(regeneratorRuntime.mark((function e(t,r){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("email",t),n.append("phone",r),e.next=5,x.a.post("/forget",n).then((function(e){return e})).catch((function(e){return e}));case 5:return data=e.sent,e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return _.apply(this,arguments)}),updateDevice:(y=Object(S.a)(regeneratorRuntime.mark((function e(t,r,n){var o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new FormData).append("mem_id",t),o.append("mem_device",r),o.append("check_login",n),e.next=6,x.a.post("/updatedevice",o).then((function(e){return e})).catch((function(e){return e}));case 6:return data=e.sent,e.abrupt("return",data);case 8:case"end":return e.stop()}}),e)}))),function(e,t,r){return y.apply(this,arguments)}),login:(v=Object(S.a)(regeneratorRuntime.mark((function e(t,r){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("username",t),n.append("password",r),e.next=5,x.a.post("/auth",n).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 5:return data=e.sent,e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return v.apply(this,arguments)}),getProfile:(h=Object(S.a)(regeneratorRuntime.mark((function e(t){var r,n,o,data,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:null,n=c.length>2&&void 0!==c[2]?c[2]:null,o=new FormData,console.log(t),null!=t&&o.append("token",t),null!=r&&o.append("user_id",r),null!=n&&o.append("type",n),e.next=9,x.a.post("/profile",o).then((function(e){return e})).catch((function(e){return e}));case 9:return data=e.sent,e.abrupt("return",data);case 11:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)}),updateUUID:(d=Object(S.a)(regeneratorRuntime.mark((function e(t,r){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("mem_id",t),n.append("token",r),e.next=5,x.a.post("/updateUUID",n).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 5:return data=e.sent,e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return d.apply(this,arguments)}),updateStatusQueue:(f=Object(S.a)(regeneratorRuntime.mark((function e(t,r){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("company_id",t),n.append("status",r),e.next=5,x.a.post("/updateStatusQueue",n).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 5:return data=e.sent,e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)}),updateStatusMenuOrder:(l=Object(S.a)(regeneratorRuntime.mark((function e(t,r){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("company_id",t),n.append("status",r),e.next=5,x.a.post("/updateStatusMenuOrder",n).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 5:return data=e.sent,e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)}),setAuth:function(data){localStorage.mem_id=data.mem_id,localStorage.token=data.token,localStorage.username=data.username,localStorage.firstname=data.firstname,localStorage.lastname=data.lastname,localStorage.email=data.email,localStorage.phone=data.phone},setAuthProfile:function(data){localStorage.mem_id=data.mem_id,localStorage.token=data.mem_token,localStorage.username=data.mem_user,localStorage.firstname=data.mem_fname,localStorage.lastname=data.mem_lname,localStorage.email=data.mem_email,localStorage.phone=data.mem_phone},getAuth:function(){var data=null;return null!=localStorage.token&&(data={token:localStorage.token,username:localStorage.username,firstname:localStorage.firstname,lastname:localStorage.lastname,email:localStorage.email,phone:localStorage.phone}),data},logout:function(){localStorage.removeItem("social"),localStorage.removeItem("providerId"),localStorage.removeItem("member_travel"),localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("firstname"),localStorage.removeItem("lastname"),localStorage.removeItem("newmember"),localStorage.removeItem("mem_id"),localStorage.removeItem("email"),localStorage.removeItem("phone"),localStorage.removeItem("esafety_pre_link"),localStorage.removeItem("esafety_link"),localStorage.removeItem("newmember"),localStorage.removeItem("profile"),localStorage.removeItem("company"),localStorage.removeItem("user_list"),localStorage.removeItem("shop_list"),localStorage.removeItem("group_list"),localStorage.removeItem("lat"),localStorage.removeItem("lng"),localStorage.removeItem("checkpoint"),localStorage.removeItem("configData"),localStorage.removeItem("pins"),localStorage.removeItem("device"),localStorage.removeItem("type"),localStorage.removeItem("room"),localStorage.removeItem("company_id"),localStorage.removeItem("esafety_link"),localStorage.removeItem("historyOrder"),localStorage.removeItem("order_company"),localStorage.removeItem("queue"),localStorage.removeItem("prov"),this.signOut()},loginFacebook:function(){var e=new P.a.auth.FacebookAuthProvider;P.a.auth().signInWithRedirect(e)},loginGmail:function(){var e=new P.a.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/contacts.readonly"),e.addScope("https://www.googleapis.com/auth/user.emails.read"),e.addScope("https://www.googleapis.com/auth/user.gender.read"),e.addScope("https://www.googleapis.com/auth/user.birthday.read"),e.addScope("https://www.googleapis.com/auth/user.phonenumbers.read"),e.setCustomParameters({login_hint:"user@example.com"}),P.a.auth().signInWithRedirect(e)},CountryCode:(m=Object(S.a)(regeneratorRuntime.mark((function e(t,r){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("http://api.geonames.org/findNearbyPlaceNameJSON?lat="+t+"&lng="+r+"&username=isafethailand").then((function(e){return e})).catch((function(e){return e}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return m.apply(this,arguments)}),PhoneCode:(c=Object(S.a)(regeneratorRuntime.mark((function e(code){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/phonecode/"+code).then((function(e){return e})).catch((function(e){return e}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)}),verifyphone:(o=Object(S.a)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new P.a.auth.PhoneAuthProvider,e.next=3,r.verifyPhoneNumber(t,window.recaptchaVerifier);case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),onSignInSubmit:function(){var e=this;return Object(S.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e,!e.isPhoneNumberValid()){t.next=13;break}return window.signingIn=!0,n=r.getPhoneNumberFromUserInput(),o=window.recaptchaVerifier,localStorage.phone=n,c=new P.a.auth.PhoneAuthProvider,t.next=9,c.verifyPhoneNumber(n,o).then((function(e){return e})).catch(function(){var e=Object(S.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,c.verifyPhoneNumber(n,o).then((function(e){return console.log(e),P.a.auth().signInWithCredential(e)})).catch((function(e){return console.log(e),e}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:return m=t.sent,t.abrupt("return",m);case 13:alert("Please enter phone number");case 14:case"end":return t.stop()}}),t)})))()},checkVerifyCode:(n=Object(S.a)(regeneratorRuntime.mark((function e(t,r){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.auth.PhoneAuthProvider.credential(t,r);case 2:return n=e.sent,e.next=5,P.a.auth().signInWithCredential(n).then((function(e){return e})).catch((function(e){return e}));case 5:return data=e.sent,e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),getPhoneNumberFromUserInput:function(){var e=document.getElementById("phone-number").value,code=localStorage.PhoneCode;return 3==code.length?code+e.substring(1,e.length):code+e},isPhoneNumberValid:function(){return-1!==this.getPhoneNumberFromUserInput().search(/^\+[0-9\s\-\(\)]+$/)},resetRecaptcha:function(){return window.recaptchaVerifier.render().then((function(e){grecaptcha.reset(e)}))},updateSignInButtonUI:function(){document.getElementById("sign-in-button").disabled=!this.isPhoneNumberValid()||!!window.signingIn},signOut:function(){P.a.auth().signOut().then((function(){})).catch((function(e){}))}}},171:function(e,t,r){"use strict";var n=r(3),o=r(186);n.default.use(o,{load:{language:"th",key:"AIzaSyBmQcPSDY0cyPMRTmNBjGALE57jKMCY5GU",libraries:"places,drawing,visualization"}})},172:function(e,t,r){"use strict";var n=r(3),o=r(243);n.default.use(o)},173:function(e,t,r){"use strict";var n,o=r(3);n=r(384),o.default.use(n)},174:function(e,t,r){"use strict";r(27);var n=r(3),o=r(175),c=r.n(o);n.default.component(c.a.name,c.a)},176:function(e,t,r){"use strict";var n=r(3),o=r(36);o.a.apps.length||o.a.initializeApp({apiKey:"AIzaSyBmQcPSDY0cyPMRTmNBjGALE57jKMCY5GU",authDomain:"isafethailand-34cd9.firebaseapp.com",databaseURL:"https://isafethailand-34cd9.firebaseio.com",projectId:"isafethailand-34cd9",storageBucket:"isafethailand-34cd9.appspot.com",messagingSenderId:"914852749359",appId:"1:914852749359:web:95a7c5455c08bbe74c66da",measurementId:"G-DBE5CYQTWS"}),n.default.use(o.a)},177:function(e,t,r){"use strict";var n=r(3),o=r(244),c=r.n(o);n.default.use(c.a)},213:function(e,t,r){var content=r(314);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(54).default)("430a8e80",content,!0,{sourceMap:!1})},228:function(e,t,r){var content=r(356);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(54).default)("932a8f60",content,!0,{sourceMap:!1})},247:function(e,t,r){"use strict";var n,o,c,m,l,f,d,h=r(13),v=r(4),y=(r(57),r(67),r(73),r(75),r(27),r(37),r(71)),_=r(114),w=r(70),k=Object(h.a)({data:function(){return{version:"version",domain:"domain"}},mounted:function(){var e=this;this.checkInternet(),this.$nextTick((function(){e.$nuxt.$loading.start(),setTimeout((function(){return e.$nuxt.$loading.finish()}),1e3)}));Object(w.debounce)(this.makeDomain)(this),Object(w.debounce)(this.makeServer)(this),Object(w.debounce)(this.makeTitle)(this),Object(w.debounce)(this.makeFooter)(this),Object(w.debounce)(this.makeVersion)(this,"1.4.7"),Object(w.debounce)(this.setServiceWorker),this.$route.fullPath.includes("undefined")&&(window.location.href="/"),console.log(this.$route.fullPath);var t=y.a.getDevice();Object(w.debounce)(this.makeCheckDeviceLogin,300)(this,t)},created:function(){},methods:{beforePageDestroyed:function(e){var t=this.$route.fullPath;console.log(t)},checkInternet:function(){navigator.onLine,this.$route.name},setServiceWorker:function(){return Object(v.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.$workbox;case 2:t=e.sent,console.log(t),t&&(t.addEventListener("installed",(function(e){console.log("installed : ",e),e.isUpdate})),t.addEventListener("activated",(function(e){console.log("[WORKER] worker con data: Activate ",e.data),e.isUpdate})));case 5:case"end":return e.stop()}}),e)})))()},makeVersion:(d=Object(v.a)(regeneratorRuntime.mark((function e(t,r){var data,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.makegetVersion();case 2:200==(data=e.sent).status&&(n=data.data,t.version=n,console.log(n,r),r!=n&&window.location.reload());case 4:case"end":return e.stop()}}),e)}))),function(e,t){return d.apply(this,arguments)}),makeDomain:(f=Object(v.a)(regeneratorRuntime.mark((function e(t){var data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.makegetSetting("Domain");case 2:200==(data=e.sent).status&&(r=data.data)&&(localStorage.domain=r,t.domain=r);case 4:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)}),makeServer:(l=Object(v.a)(regeneratorRuntime.mark((function e(t){var data,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.makegetSetting("Server");case 2:200==(data=e.sent).status&&(r=data.data)&&(localStorage.server=r);case 4:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),makeTitle:(m=Object(v.a)(regeneratorRuntime.mark((function e(t){var data,title,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.makegetSetting("Title");case 2:200==(data=e.sent).status&&(title=data.data)&&(r=null,r=title.length>1?title.filter((function(e){return"Title"==e.name}))[0].value:title[0].value,localStorage.title=r);case 4:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)}),makeFooter:(c=Object(v.a)(regeneratorRuntime.mark((function e(t){var data,footer;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.makegetSetting("Footer");case 2:200==(data=e.sent).status&&(footer=data.data)&&(localStorage.footer=JSON.stringify(footer));case 4:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)}),makeCheckDeviceLogin:(o=Object(v.a)(regeneratorRuntime.mark((function e(t,r){var data,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/"==t.$route.fullPath||t.$route.fullPath.includes("/esafety/login")||t.$route.fullPath.includes("/esafety/signup")||t.$route.fullPath.includes("/esafety/signup/verify")){e.next=5;break}return e.next=3,_.a.checkDeviceLogin(r);case 3:200==(data=e.sent).status&&(n=data.data)&&(o=n.mem_id,c=localStorage.profile?JSON.parse(localStorage.profile):null,"0"==n.check_login&&c?"6"!=c.member.mem_type&&(_.a.logout(),setTimeout((function(){t.$router.push("/")}),1e3)):o!==localStorage.mem_id&&localStorage.mem_id&&Object(w.debounce)(t.getProfile)(t,o));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),getProfile:(n=Object(v.a)(regeneratorRuntime.mark((function e(t,r){var n,o,c,link,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.getProfile(null,r,null);case 2:if(200==(n=e.sent).status){t.profile=n.data,localStorage.mem_id=t.profile.member.mem_id,localStorage.token=t.profile.member.mem_token,localStorage.username=t.profile.member.mem_user,localStorage.firstname=t.profile.member.mem_fname,localStorage.lastname=t.profile.member.mem_lname,localStorage.email=t.profile.member.mem_email,localStorage.phone=t.profile.member.mem_phone,localStorage.pins=JSON.stringify(t.profile.pins),localStorage.member_travel=JSON.stringify(n.data.member_travel),localStorage.company_id=t.profile.pins.length>0?t.profile.pins[0].company_id:"",t.profile.member_travel&&(o="0"!=t.profile.member_travel.bus_type?"6":t.profile.member_travel.mem_type,localStorage.type=o),t.profile.member_travel||(t.profile.member_travel={mem_type:""}),"undefined"===localStorage.mem_id&&(localStorage.mem_id=t.profile.member.mem_id),t.profile.checkpoint=null==t.profile.checkpoint?{mem_company:"",check_is_temp:"",check_note:"",check_temp:"",temp_status:"",company_phone:""}:t.profile.checkpoint;try{c="M"==t.profile.member.mem_sex?"https://image.flaticon.com/icons/svg/145/145859.svg":"https://image.flaticon.com/icons/png/512/145/145866.png",t.profile.member.mem_image=null==t.profile.member.mem_image?"":t.profile.member.mem_image,link="/upload/OTA/profile/",t.profile.member_travel&&(link=y.a.getFolderProfile(t.profile.member_travel.mem_type,t.selection)),t.profile.member.mem_image=""==t.profile.member.mem_image?c:t.domain+link+t.profile.member.mem_image,t.profile.pins.length>0&&(t.company=t.profile.pins[0],t.profile.member.mem_type=t.company.mem_type,t.profile.member_travel?("0"!=t.profile.member_travel.bus_type||t.profile.member_travel.mem_type,m=y.a.getFolderProfile(t.profile.member_travel.mem_type,t.selection),t.company.mem_image_logo=t.company.mem_image_logo?t.company.mem_image_logo:"",t.company.mem_image_logo=""==t.company.mem_image_logo?"https://image.flaticon.com/icons/svg/2399/2399925.svg":t.domain+m+t.company.mem_image_logo):(t.company.mem_image_logo=t.company.mem_image_logo?t.company.mem_image_logo:"",t.company.mem_image_logo=""==t.company.mem_image_logo||null==t.company.mem_image_logo?"https://image.flaticon.com/icons/svg/2399/2399925.svg":t.domain+"/upload/OTA/logo/"+t.company.mem_image_logo),t.company.mem_type=t.profile.member_travel?t.profile.member_travel.mem_type:null,localStorage.company=JSON.stringify(t.company)),localStorage.profile=JSON.stringify(t.profile)}catch(e){console.log(e)}localStorage.redirect?t.$router.push(localStorage.redirect):t.$router.push("/esafety/home/main")}case 4:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})}},"data",(function(){return{profile:null,company:null,pins:null}})),S=(r(355),r(30)),x=r(112),R=r.n(x),O=r(395),component=Object(S.a)(k,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("nuxt")],1)}),[],!1,null,null,null);t.a=component.exports;R()(component,{VApp:O.a})},295:function(e,t,r){e.exports=r(296)},313:function(e,t,r){"use strict";r(213)},314:function(e,t,r){var n=r(53)(!1);n.push([e.i,"h1[data-v-203ae855]{font-size:20px}",""]),e.exports=n},355:function(e,t,r){"use strict";r(228)},356:function(e,t,r){var n=r(53)(!1);n.push([e.i,"body{background-color:#f5f5f5}.shadow-black{text-shadow:2px 1px 1px rgba(0,0,0,.4)}.working{background-color:#ff6400!important;border-color:#ff6400!important}.pink{background-color:#e94153!important;border-color:#e94153!important}.pink--text{color:#e94153!important}.private{background-color:#0275d8!important;border-color:#0275d8!important}.booking{border:3px dashed #00f!important}.precheckin-green{padding:0;color:green;border:1px dashed green}.precheckin-yellow{padding:0;color:#fdd835;border:1px dashed #fdd835}.precheckin-red{padding:0;color:red;border:1px dashed red}",""]),e.exports=n},367:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=367},71:function(e,t,r){"use strict";var n,o,c,m,l,f,d,h,v,y,_,w,k,S,x,R,O,P,I,j,D,U,E=r(13),A=r(18),M=r(4),N=(r(57),r(43),r(94),r(270),r(19),r(271),r(272),r(273),r(274),r(275),r(276),r(277),r(278),r(279),r(280),r(281),r(282),r(283),r(284),r(285),r(286),r(287),r(288),r(289),r(290),r(291),r(292),r(293),r(294),r(120),r(67),r(27),r(37),r(73),r(75),r(85),r(50),r(259),r(9)),C={crossdomain:!0};t.a=(n={resizeImage:function(e,t){var r=new FileReader,image=new Image,canvas=document.createElement("canvas"),n=function(){var e=image.width,r=image.height;return e>r?e>t&&(r*=t/e,e=t):r>t&&(e*=t/r,r=t),canvas.width=e,canvas.height=r,canvas.getContext("2d").drawImage(image,0,0,e,r),function(e){for(var t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=t.length,o=new Uint8Array(n),i=0;i<n;i++)o[i]=t.charCodeAt(i);return new Blob([o],{type:r})}(canvas.toDataURL("image/jpeg"))};return new Promise((function(t,o){e&&(e.type.match(/image.*/)?(r.onload=function(e){image.onload=function(){return t(n())},image.src=e.target.result},r.readAsDataURL(e)):o(new Error("Not an image")))}))},getDistanceFromLatLonInKm:function(e,t,r,n){var o=this.deg2rad(r-e),c=this.deg2rad(n-t),a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(c/2)*Math.sin(c/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))},deg2rad:function(e){return e*(Math.PI/180)},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},makegetVersion:(U=Object(M.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("qeasymenu"),e.next=3,N.a.get("/version?name="+t).then((function(e){return e})).catch((function(e){return e}));case 3:return data=e.sent,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)}))),function(){return U.apply(this,arguments)}),makegetSetting:(D=Object(M.a)(regeneratorRuntime.mark((function e(t){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat("qeasymenu"),e.next=3,N.a.get("/setting?type="+t+"&name="+r).then((function(e){return e})).catch((function(e){return e}));case 3:return data=e.sent,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)}))),function(e){return D.apply(this,arguments)}),makegetProfileJobOrder:(j=Object(M.a)(regeneratorRuntime.mark((function e(t,r){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/joborder_traveler/"+t+"/"+r).then((function(e){return e})).catch((function(e){return e}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return j.apply(this,arguments)}),makeLanguage:(I=Object(M.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/language").then((function(e){return e})).catch((function(e){return e}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(){return I.apply(this,arguments)}),makeCategorieSearch:(P=Object(M.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("qeasymenu"),e.next=3,N.a.get("/categorie?name="+t).then((function(e){return e})).catch((function(e){return e}));case 3:return data=e.sent,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)}))),function(){return P.apply(this,arguments)}),makeSubCategorieSearch:(O=Object(M.a)(regeneratorRuntime.mark((function e(t){var r,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat("qeasymenu"),e.next=3,N.a.get("/categorie_detail/"+t+"?name="+r).then((function(e){return e})).catch((function(e){return e}));case 3:return data=e.sent,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)}))),function(e){return O.apply(this,arguments)}),makeBusinessSearch:(R=Object(M.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("qeasymenu"),e.next=3,N.a.get("/business/0?name="+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 3:return data=e.sent,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)}))),function(){return R.apply(this,arguments)}),makeCategoriePostSearch:(x=Object(M.a)(regeneratorRuntime.mark((function e(){var t,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("qeasymenu"),e.next=3,N.a.get("/categorie_post?name="+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 3:return data=e.sent,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)}))),function(){return x.apply(this,arguments)}),makeCountry:(S=Object(M.a)(regeneratorRuntime.mark((function e(){var t,data,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,N.a.get("/country/"+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 3:return data=e.sent,e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)}))),function(){return S.apply(this,arguments)}),makeState:(k=Object(M.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/states/"+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return k.apply(this,arguments)}),makeCity:(w=Object(M.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/cities/"+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return w.apply(this,arguments)}),makeProvince:(_=Object(M.a)(regeneratorRuntime.mark((function e(){var t,r,data,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",r=n.length>1&&void 0!==n[1]?n[1]:"",e.next=4,N.a.get("/province?id="+t+"&prov="+r,C).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 4:return data=e.sent,e.abrupt("return",data);case 6:case"end":return e.stop()}}),e)}))),function(){return _.apply(this,arguments)}),makeDistrict:(y=Object(M.a)(regeneratorRuntime.mark((function e(){var t,r,data,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",r=n.length>1&&void 0!==n[1]?n[1]:"",e.next=4,N.a.get("/district?id="+t+"&dist="+r).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 4:return data=e.sent,e.abrupt("return",data);case 6:case"end":return e.stop()}}),e)}))),function(){return y.apply(this,arguments)}),makeSubDistrict:(v=Object(M.a)(regeneratorRuntime.mark((function e(){var t,r,data,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",r=n.length>1&&void 0!==n[1]?n[1]:"",e.next=4,N.a.get("/sdistrict?id="+t+"&sdist="+r).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 4:return data=e.sent,e.abrupt("return",data);case 6:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)}),makeZipCode:(h=Object(M.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/zipcode/"+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)}),makeZipCodeFull:(d=Object(M.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/zipcodefull?id="+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)}),makeOwner:(f=Object(M.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/owner/"+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)}),makeWorkingProv:(l=Object(M.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/workingprov/"+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)}),makeWorking:(m=Object(M.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/working/"+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)}),makeWorkingData:(c=Object(M.a)(regeneratorRuntime.mark((function e(t){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("/workingdata/"+t).then((function(e){return e})).catch((function(e){self.error="Unknown Error. Please check details and try again."}));case 2:return data=e.sent,e.abrupt("return",data);case 4:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)}),makeLocation:function(e){var t=this,r=new e.maps.Geocoder,n=this.province_list.filter((function(e,i){return e.id==t.member.company.prov})),o=this.district_list.filter((function(e,i){return e.id==t.member.company.district})),c=this.sdistrict_list.filter((function(e,i){return e.id==t.member.company.sdistrict})),m=n.length>0?n[0].text:"",l=o.length>0?o[0].text:"",f=c.length>0?c[0].text:"";console.log(m,l,f);var address="";address="1"!=t.member.company.prov?t.member.company.addr+" ตำบล "+f+" อำเภอ "+l+" จังหวัด "+m+" "+t.member.company.zipcode:t.member.company.addr+" แขวง "+f+" "+l+" จังหวัด "+m+" "+t.member.company.zipcode,console.log(address),r.geocode({address:address},(function(r,n){if(console.log(r,n),n==e.maps.GeocoderStatus.OK){var o=r.filter((function(e,r){return e.formatted_address.includes(t.member.company.zipcode)}));o.length>0?(t.member.company.lat=o[0].geometry.location.lat().toString(),t.member.company.lng=o[0].geometry.location.lng().toString()):(t.member.company.lat=r[0].geometry.location.lat().toString(),t.member.company.lng=r[0].geometry.location.lng().toString()),console.log(r,o)}}))},ocrScan:(o=Object(M.a)(regeneratorRuntime.mark((function e(t){var r,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.split(",")[1],n={requests:[{features:[{type:"TEXT_DETECTION"}],image:{content:r}}]},e.next=5,N.a.post("https://vision.googleapis.com/v1/images:annotate?key=".concat("AIzaSyBmQcPSDY0cyPMRTmNBjGALE57jKMCY5GU"),n).then((function(e){return e.data.responses[0].textAnnotations})).catch((function(e){console.log(e)}));case 5:return data=e.sent,e.abrupt("return",data);case 7:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)}),getDevice:function(){var e=navigator.userAgent;return e.substring(0,e.lastIndexOf(")")+1)},saveLocation:function(e,t,r,n){var o=(new Date).toISOString(),c=new FormData;c.append("mem_id",JSON.stringify(e)),c.append("device",JSON.stringify(t)),c.append("lat",JSON.stringify(r)),c.append("lng",JSON.stringify(n));var m="https://www.isafetravel.com/api/v2/OTAAutoLocation";fetch(m,{method:"post",body:c}).then((function(e){return e.text()})).then((function(t){console.log(t),console.log(e,o,r,n)})).catch((function(){return console.log("Can’t access "+m+" response. Blocked by browser?")}))},parseDate:function(e){if(!e)return null;console.log(e);var t=e.split("/"),r=Object(A.a)(t,3),n=r[0],o=r[1],c=r[2];return o&&c?"".concat(c,"-").concat(o.padStart(2,"0"),"-").concat(n.padStart(2,"0")):e},formatDate:function(e){if(!e)return null;var t=e.split("-"),r=Object(A.a)(t,3),n=r[0],o=r[1],c=r[2];return o&&n?"".concat(c.padStart(2,"0"),"/").concat(o.padStart(2,"0"),"/").concat(n):e},setUrl:function(e){var t=e.$route.fullPath;localStorage.esafety_link&&t!==localStorage.esafety_link&&(localStorage.esafety_pre_link=localStorage.esafety_link),localStorage.esafety_pre_link||(localStorage.esafety_pre_link=t),localStorage.esafety_link=t},getFolderProfile:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2";return"1"==e?"/upload/guide/":"4"==e?"/upload/operator/":"5"==e?"/upload/police/":"7"==e?"/upload/rescue/":"8"==e||"9"==e?"/upload/public_health/":"10"==e?"/upload/depart_tourism/":"11"==e?"/upload/bc/":"6"==e&&"1"==t?"/upload/OTA/logo/":"/upload/OTA/profile/"},getSourceImage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2",r="https://www.isafetravel.com",n="";if("0"!=e.mem_type&&(t=""!=e.mem_image_logo&&e.mem_image_logo?"1":"2"),"2"==t&&(t="4"==e.mem_type?"1":t),e.bus_type&&"0"!=e.bus_type&&"2"!=t?e.mem_image_logo&&""!=e.mem_image_logo||(n="C-20200818-00000"==e.mem_id?"https://www.flaticon.com/svg/static/icons/svg/2001/2001546.svg":"https://image.flaticon.com/icons/svg/2399/2399925.svg"):e.mem_image&&""!=e.mem_image||(n="M"==e.mem_sex?"https://image.flaticon.com/icons/svg/145/145859.svg":"https://image.flaticon.com/icons/png/512/145/145866.png"),""==n){var link="/upload/OTA/profile/";e.mem_type?"1"==e.mem_type?link="/upload/guide/":"4"==e.mem_type?link="/upload/operator/":"5"==e.mem_type?link="/upload/police/":"7"==e.mem_type?link="/upload/rescue/":"8"==e.mem_type||"9"==e.mem_type?link="/upload/public_health/":"10"==e.mem_type?link="/upload/depart_tourism/":"11"==e.mem_type?link="/upload/bc/":"6"==e.mem_type&&"1"==t&&(link="/upload/OTA/logo/"):e.mem_image_logo=""!=e.mem_image_logo&&e.mem_image_logo?e.mem_image_logo:e.mem_image,n="0"==e.mem_type||"2"==t?e.mem_image.includes("http")?e.mem_image:r+link+e.mem_image:e.mem_image_logo.includes("http")?e.mem_image_logo:r+link+e.mem_image_logo}return n},toBack:function(e){var t=e.$route.fullPath,r=localStorage.esafety_pre_link;r?(t=t.split("?")[0],r=r.split("?")[0],console.log(t,r),r==t?e.$router.push("/esafety/home/main"):e.$router.push(localStorage.esafety_pre_link)):e.$router.push("/esafety/home/main")}},Object(E.a)(n,"getDistanceFromLatLonInKm",(function(e,t,r,n){var o=this.deg2rad(r-e),c=this.deg2rad(n-t),a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(r))*Math.sin(c/2)*Math.sin(c/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))})),Object(E.a)(n,"deg2rad",(function(e){return e*(Math.PI/180)})),n)},82:function(e,t,r){"use strict";var n={layout:"empty",props:{error:{type:Object,default:null}},head:function(){return{title:404===this.error.statusCode?this.pageNotFound:this.otherError}},data:function(){return{pageNotFound:"404 Not Found",otherError:"An error occurred"}}},o=(r(313),r(30)),c=r(112),m=r.n(c),l=r(395),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{dark:""}},[404===e.error.statusCode?r("h1",[e._v("\n    "+e._s(e.pageNotFound)+"\n  ")]):r("h1",[e._v("\n    "+e._s(e.otherError)+"\n  ")]),e._v(" "),r("NuxtLink",{attrs:{to:"/"}},[e._v("\n    Home page\n  ")])],1)}),[],!1,null,"203ae855",null);t.a=component.exports;m()(component,{VApp:l.a})},9:function(e,t,r){"use strict";var n=r(64),o=r.n(n);t.a=o.a.create({baseURL:"https://www.isafetravel.com/api/v2"}),o.a.defaults.headers.common["Access-Control-Allow-Origin"]="*"}},[[295,121,12,122]]]);